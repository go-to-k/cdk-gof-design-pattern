<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="803px" height="630px" viewBox="-0.5 -0.5 803 630" content="&lt;mxfile&gt;&lt;diagram id=&quot;9KW1ADvCEIuN-hiICIac&quot; name=&quot;cdk&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);">
    <defs/>
    <g>
        <rect x="106" y="2" width="70" height="30" fill="#ffff88" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 107px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                独自
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="141" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    独自
                </text>
            </switch>
        </g>
        <rect x="16" y="2" width="70" height="30" fill="#cce5ff" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 17px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                CDK提供
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="51" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    CDK提供
                </text>
            </switch>
        </g>
        <path d="M 273 365.5 L 513.63 365.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 518.88 365.5 L 511.88 369 L 513.63 365.5 L 511.88 362 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 76 357 L 76 337 L 273 337 L 273 357" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 76 357 L 76 394 L 273 394 L 273 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 76 357 L 273 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="174" y="354.5">
                BucketVersioningChecker
            </text>
        </g>
        <path d="M 76 361 L 273 361" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 372px; margin-left: 82px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="82" y="384" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 174.5 337 L 174.5 275.62" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 174.5 262.62 L 181 275.62 L 168 275.62 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 99.5 227.5 L 99.5 204.5 L 249.5 204.5 L 249.5 227.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 99.5 227.5 L 99.5 261.5 L 249.5 261.5 L 249.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 99.5 227.5 L 249.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="174" y="222">
                IAspect
            </text>
        </g>
        <path d="M 99.5 231.5 L 249.5 231.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 243px; margin-left: 106px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <i>
                                    + visit(node: IConstruct)
                                </i>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="106" y="255" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruc...
                </text>
            </switch>
        </g>
        <path d="M 520 368.5 L 520 345.5 L 670 345.5 L 670 368.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 520 368.5 L 520 385.5 L 670 385.5 L 670 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 520 368.5 L 670 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="594.5" y="363">
                Bucket
            </text>
        </g>
        <path d="M 520 372.5 L 670 372.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 520 231 L 520 208 L 670 208 L 670 231" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 520 231 L 520 258 L 670 258 L 670 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 520 231 L 670 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="594.5" y="225.5">
                IConstruct
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 238px; margin-left: 526px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="526" y="250" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 520 254 L 670 254" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 595 345.5 L 595 272.12" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 595 259.12 L 601.5 272.12 L 588.5 272.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 169.28 451 L 172.76 394" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="0" y="451" width="331" height="124" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 329px; height: 1px; padding-top: 513px; margin-left: 2px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                ダブルディスパッチによる具象な操作対象の型ごとの引数のメソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしている。
                                <br/>
                                (全IConstructに対応するダブルディスパッチは量の問題で現実的に不可能でもある)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="2" y="517" fill="#000000" font-family="Helvetica" font-size="12px">
                    ダブルディスパッチによる具象な操作対象の型ごとの引数のメソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしている。...
                </text>
            </switch>
        </g>
        <path d="M 588.47 407 L 591.85 385.5" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="340" y="407" width="462" height="222" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 460px; height: 1px; padding-top: 518px; margin-left: 342px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <div>
                                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。
                                </div>
                                <div></div>
                                <span style="text-align: center;">
                                    <br/>
                                    synthesize時、synthesize関数(aws-cdk-lib/core/lib/private/synthesis.ts)内のrecurse関数で、ObjectStructureとしてのStack(ツリーのルート)から順に再起的に辿り、自身のIConstructからAspects経由でIAspect(Visitor)の一覧を取得してVisitorがIConstructにアクセスできるようにしている。
                                    <br/>
                                </span>
                                <div>
                                    synthesize
                                </div>
                                <div>
                                    -&gt;invokeAspects
                                </div>
                                <div>
                                    -&gt;recurse
                                </div>
                                <div>
                                    -&gt;Aspects.ofで取った自Constructに対応するaspectsでループ
                                </div>
                                <div>
                                    -&gt;aspect.visit
                                </div>
                                <div>
                                    -&gt;自Constructのnode.childrenでループ
                                </div>
                                <div>
                                    -&gt;recurse(子Constructごとに再起)
                                </div>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="342" y="522" fill="#000000" font-family="Helvetica" font-size="12px">
                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。...
                </text>
            </switch>
        </g>
        <path d="M 595 117 L 595 205.76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 588.5 193.88 L 595 206.88 L 601.5 193.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 160px; margin-left: 597px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;">
                                node.children
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="597" y="160" fill="#000000" font-family="Helvetica" font-size="11px">
                    node.children
                </text>
            </switch>
        </g>
        <path d="M 520 87 L 520 65 L 670 65 L 670 87" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 520 87 L 520 117 L 670 117 L 670 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 520 87 L 670 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="594.5" y="82.5">
                Stack
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 94px; margin-left: 526px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="526" y="106" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 520 110 L 670 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 227 80 L 227 60 L 424 60 L 424 80" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 227 80 L 227 122 L 424 122 L 424 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 227 80 L 424 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="325" y="77.5">
                VisitorStack
            </text>
        </g>
        <path d="M 227 84 L 424 84" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 95px; margin-left: 233px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="233" y="107" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 424 91 L 505.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 518.88 91 L 505.88 97.5 L 505.88 84.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 109.96 91 L 218.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 225.88 91 L 218.88 93.33 L 218.88 88.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 62.98 109.5 L 63 353 Q 63 363 65.44 363.05 L 67.88 363.11" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 74.88 363.27 L 67.83 365.44 L 67.94 360.78 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 16 92.5 L 16 72.5 L 109.96 72.5 L 109.96 92.5" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 16 92.5 L 16 109.5 L 109.96 109.5 L 109.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 16 92.5 L 109.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="62.48" y="90">
                Client(bin)
            </text>
        </g>
        <path d="M 16 96.5 L 109.96 96.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="482" y="0" width="226" height="45" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 224px; height: 1px; padding-top: 23px; margin-left: 483px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                構造を保持するObjectStructureとして
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="595" y="26" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    構造を保持するObjectStructureとして
                </text>
            </switch>
        </g>
        <path d="M 595 45 L 595 65" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 105.58 109.5 L 310.16 198.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 314.97 200.42 L 307.16 200.84 L 310.16 198.33 L 309.95 194.42 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 464 233 L 511.88 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 518.88 233 L 511.88 235.33 L 511.88 230.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 316 233 L 257.62 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 250.62 233 L 257.62 230.67 L 257.62 235.33 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 316 213.5 L 316 190.5 L 464 190.5 L 464 213.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 316 213.5 L 316 275.5 L 464 275.5 L 464 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 316 213.5 L 464 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="389.5" y="208">
                Aspects
            </text>
        </g>
        <path d="M 316 217.5 L 464 217.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 229px; margin-left: 322px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <u>
                                    + of(scope: IConstruct)
                                </u>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="322" y="241" fill="#000000" font-family="Helvetica" font-size="12px">
                    + of(scope: IConstruct)
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 256px; margin-left: 322px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + add(aspect: IAspect)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="322" y="268" fill="#000000" font-family="Helvetica" font-size="12px">
                    + add(aspect: IAspect)
                </text>
            </switch>
        </g>
        <path d="M 670 91 L 724 91 L 724 233 L 684.12 233" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 671.12 233 L 684.12 226.5 L 684.12 239.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="265" y="293" width="246" height="34" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 244px; height: 1px; padding-top: 310px; margin-left: 266px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspectsが媒介として存在。
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="388" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspect...
                </text>
            </switch>
        </g>
        <path d="M 388.9 275.5 L 388.44 293" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Text is not SVG - cannot display
            </text>
        </a>
    </switch>
</svg>