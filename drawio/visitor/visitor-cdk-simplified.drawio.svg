<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="813px" height="630px" viewBox="-0.5 -0.5 813 630" content="&lt;mxfile&gt;&lt;diagram id=&quot;9KW1ADvCEIuN-hiICIac&quot; name=&quot;cdk&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);">
    <defs/>
    <g>
        <rect x="116" y="2" width="70" height="30" fill="#ffff88" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 117px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                独自
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="151" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    独自
                </text>
            </switch>
        </g>
        <rect x="26" y="2" width="70" height="30" fill="#cce5ff" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 27px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                CDK提供
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="61" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    CDK提供
                </text>
            </switch>
        </g>
        <path d="M 283 365.5 L 523.63 365.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 528.88 365.5 L 521.88 369 L 523.63 365.5 L 521.88 362 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 86 357 L 86 337 L 283 337 L 283 357" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 86 357 L 86 394 L 283 394 L 283 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 86 357 L 283 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="184" y="354.5">
                BucketVersioningChecker
            </text>
        </g>
        <path d="M 86 361 L 283 361" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 372px; margin-left: 92px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="92" y="384" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 184.5 337 L 184.5 275.62" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 184.5 262.62 L 191 275.62 L 178 275.62 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 109.5 227.5 L 109.5 204.5 L 259.5 204.5 L 259.5 227.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 109.5 227.5 L 109.5 261.5 L 259.5 261.5 L 259.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 109.5 227.5 L 259.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="184" y="222">
                IAspect
            </text>
        </g>
        <path d="M 109.5 231.5 L 259.5 231.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 243px; margin-left: 116px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <i>
                                    + visit(node: IConstruct)
                                </i>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="116" y="255" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruc...
                </text>
            </switch>
        </g>
        <path d="M 530 368.5 L 530 345.5 L 680 345.5 L 680 368.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 530 368.5 L 530 385.5 L 680 385.5 L 680 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 530 368.5 L 680 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="604.5" y="363">
                Bucket
            </text>
        </g>
        <path d="M 530 372.5 L 680 372.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 530 231 L 530 208 L 680 208 L 680 231" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 530 231 L 530 258 L 680 258 L 680 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 530 231 L 680 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="604.5" y="225.5">
                IConstruct
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 238px; margin-left: 536px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="536" y="250" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 530 254 L 680 254" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 605 345.5 L 605 272.12" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 605 259.12 L 611.5 272.12 L 598.5 272.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 177.85 433 L 181.69 394" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="0" y="433" width="337" height="190" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 335px; height: 1px; padding-top: 528px; margin-left: 2px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                引数の型が抽象で、ダブルディスパッチによる具象な操作対象の型ごとの引数のメソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`という単一ディスパッチ(※)による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしているようだ。
                                <br/>
                                (全IConstructに対応するダブルディスパッチは量の問題で現実的に不可能ではあるが...)
                                <br/>
                                <br/>
                                ※ここでの単一ディスパッチとは、言語特性としてのもの(多重ディスパッチ言語でないもの)のことではなく、「単一ディスパッチ言語で実現する手法としてのダブルディスパッチでないもの」のことを呼んでいます。
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="2" y="532" fill="#000000" font-family="Helvetica" font-size="12px">
                    引数の型が抽象で、ダブルディスパッチによる具象な操作対象の型ごとの引数のメソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`という単一ディスパッチ(※)による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしているようだ。...
                </text>
            </switch>
        </g>
        <path d="M 598.47 407 L 601.85 385.5" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="350" y="407" width="462" height="222" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 460px; height: 1px; padding-top: 518px; margin-left: 352px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <div>
                                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。
                                </div>
                                <div></div>
                                <span style="text-align: center;">
                                    <br/>
                                    synthesize時、synthesize関数(aws-cdk-lib/core/lib/private/synthesis.ts)内のrecurse関数で、ObjectStructureとしてのStack(ツリーのルート)から順に再起的に辿り、自身のIConstructからAspects経由でIAspect(Visitor)の一覧を取得してVisitorがIConstructにアクセスできるようにしている。
                                    <br/>
                                </span>
                                <div>
                                    synthesize
                                </div>
                                <div>
                                    -&gt;invokeAspects
                                </div>
                                <div>
                                    -&gt;recurse
                                </div>
                                <div>
                                    -&gt;Aspects.ofで取った自Constructに対応するaspectsでループ
                                </div>
                                <div>
                                    -&gt;aspect.visit
                                </div>
                                <div>
                                    -&gt;自Constructのnode.childrenでループ
                                </div>
                                <div>
                                    -&gt;recurse(子Constructごとに再起)
                                </div>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="352" y="522" fill="#000000" font-family="Helvetica" font-size="12px">
                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。...
                </text>
            </switch>
        </g>
        <path d="M 605 117 L 605 205.76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 598.5 193.88 L 605 206.88 L 611.5 193.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 160px; margin-left: 607px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;">
                                node.children
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="607" y="160" fill="#000000" font-family="Helvetica" font-size="11px">
                    node.children
                </text>
            </switch>
        </g>
        <path d="M 530 87 L 530 65 L 680 65 L 680 87" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 530 87 L 530 117 L 680 117 L 680 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 530 87 L 680 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="604.5" y="82.5">
                Stack
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 94px; margin-left: 536px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="536" y="106" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 530 110 L 680 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 237 80 L 237 60 L 434 60 L 434 80" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 237 80 L 237 122 L 434 122 L 434 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 237 80 L 434 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="335" y="77.5">
                VisitorStack
            </text>
        </g>
        <path d="M 237 84 L 434 84" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 95px; margin-left: 243px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="243" y="107" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 434 91 L 515.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 528.88 91 L 515.88 97.5 L 515.88 84.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 119.96 91 L 228.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 235.88 91 L 228.88 93.33 L 228.88 88.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 72.98 109.5 L 73 353 Q 73 363 75.44 363.05 L 77.88 363.11" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 84.88 363.27 L 77.83 365.44 L 77.94 360.78 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 26 92.5 L 26 72.5 L 119.96 72.5 L 119.96 92.5" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 26 92.5 L 26 109.5 L 119.96 109.5 L 119.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 26 92.5 L 119.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="72.48" y="90">
                Client(bin)
            </text>
        </g>
        <path d="M 26 96.5 L 119.96 96.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="492" y="0" width="226" height="45" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 224px; height: 1px; padding-top: 23px; margin-left: 493px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                構造を保持するObjectStructureとして
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="605" y="26" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    構造を保持するObjectStructureとして
                </text>
            </switch>
        </g>
        <path d="M 605 45 L 605 65" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 115.58 109.5 L 320.16 198.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 324.97 200.42 L 317.16 200.84 L 320.16 198.33 L 319.95 194.42 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 474 233 L 521.88 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 528.88 233 L 521.88 235.33 L 521.88 230.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 326 233 L 267.62 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 260.62 233 L 267.62 230.67 L 267.62 235.33 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 326 213.5 L 326 190.5 L 474 190.5 L 474 213.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 326 213.5 L 326 275.5 L 474 275.5 L 474 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 326 213.5 L 474 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="399.5" y="208">
                Aspects
            </text>
        </g>
        <path d="M 326 217.5 L 474 217.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 229px; margin-left: 332px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <u>
                                    + of(scope: IConstruct)
                                </u>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="332" y="241" fill="#000000" font-family="Helvetica" font-size="12px">
                    + of(scope: IConstruct)
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 256px; margin-left: 332px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + add(aspect: IAspect)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="332" y="268" fill="#000000" font-family="Helvetica" font-size="12px">
                    + add(aspect: IAspect)
                </text>
            </switch>
        </g>
        <path d="M 680 91 L 734 91 L 734 233 L 694.12 233" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 681.12 233 L 694.12 226.5 L 694.12 239.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="275" y="293" width="246" height="34" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 244px; height: 1px; padding-top: 310px; margin-left: 276px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspectsが媒介として存在。
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="398" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspect...
                </text>
            </switch>
        </g>
        <path d="M 398.9 275.5 L 398.44 293" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Text is not SVG - cannot display
            </text>
        </a>
    </switch>
</svg>