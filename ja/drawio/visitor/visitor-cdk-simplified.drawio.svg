<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="825px" height="667px" viewBox="-0.5 -0.5 825 667" content="&lt;mxfile&gt;&lt;diagram id=&quot;9KW1ADvCEIuN-hiICIac&quot; name=&quot;cdk&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);">
    <defs/>
    <g>
        <rect x="125" y="2" width="70" height="30" fill="#ffff88" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 126px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                独自
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="160" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    独自
                </text>
            </switch>
        </g>
        <rect x="35" y="2" width="70" height="30" fill="#cce5ff" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 36px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                CDK提供
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="70" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    CDK提供
                </text>
            </switch>
        </g>
        <path d="M 292 365.5 L 532.63 365.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 537.88 365.5 L 530.88 369 L 532.63 365.5 L 530.88 362 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 95 357 L 95 337 L 292 337 L 292 357" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 95 357 L 95 394 L 292 394 L 292 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 95 357 L 292 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="193" y="354.5">
                BucketVersioningChecker
            </text>
        </g>
        <path d="M 95 361 L 292 361" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 372px; margin-left: 101px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="101" y="384" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 193.5 337 L 193.5 275.62" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 193.5 262.62 L 200 275.62 L 187 275.62 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 118.5 227.5 L 118.5 204.5 L 268.5 204.5 L 268.5 227.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 118.5 227.5 L 118.5 261.5 L 268.5 261.5 L 268.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 118.5 227.5 L 268.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="193" y="222">
                IAspect
            </text>
        </g>
        <path d="M 118.5 231.5 L 268.5 231.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 243px; margin-left: 125px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <i>
                                    + visit(node: IConstruct)
                                </i>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="125" y="255" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruc...
                </text>
            </switch>
        </g>
        <path d="M 539 368.5 L 539 345.5 L 689 345.5 L 689 368.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 368.5 L 539 385.5 L 689 385.5 L 689 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 368.5 L 689 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="613.5" y="363">
                Bucket
            </text>
        </g>
        <path d="M 539 372.5 L 689 372.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 231 L 539 208 L 689 208 L 689 231" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 231 L 539 258 L 689 258 L 689 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 231 L 689 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="613.5" y="225.5">
                IConstruct
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 238px; margin-left: 545px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="545" y="250" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 539 254 L 689 254" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 614 345.5 L 614 272.12" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 614 259.12 L 620.5 272.12 L 607.5 272.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 185.64 452 L 190.91 394" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="0" y="452" width="360" height="124" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 358px; height: 1px; padding-top: 514px; margin-left: 2px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                ダブルディスパッチによる具象な操作対象の型ごとの引数の
                                <br/>
                                メソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしている。
                                <br/>
                                (全IConstructに対応するダブルディスパッチは量の問題で現実的に不可能でもある)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="2" y="518" fill="#000000" font-family="Helvetica" font-size="12px">
                    ダブルディスパッチによる具象な操作対象の型ごとの引数のメソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしている。...
                </text>
            </switch>
        </g>
        <path d="M 610.02 397 L 611.47 385.5" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="362" y="397" width="462" height="269" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 460px; height: 1px; padding-top: 532px; margin-left: 364px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <div>
                                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。
                                </div>
                                <div></div>
                                <span style="text-align: center;">
                                    <br/>
                                    synthesize時、synthesize関数(aws-cdk-lib/core/lib/private/synthesis.ts)内のrecurse
                                    <br/>
                                    関数で、ObjectStructureとしてのStack(ツリーのルート)から順に再起的に辿り、
                                    <br/>
                                    自身のIConstructからAspects経由でIAspect(Visitor)の一覧を取得してVisitorがIConstructにアクセスできるようにしている。
                                    <br/>
                                    <br/>
                                </span>
                                <div>
                                    synthesize
                                </div>
                                <div>
                                    ----&gt;invokeAspects
                                </div>
                                <div>
                                    --------&gt;recurse
                                </div>
                                <div>
                                    ------------&gt;Aspects.ofで取った自Constructに対応するaspectsでループ
                                </div>
                                <div>
                                    ----------------&gt;aspect.visit
                                </div>
                                <div>
                                    ------------&gt;自Constructのnode.childrenでループ
                                </div>
                                <div>
                                    ----------------&gt;recurse(子Constructごとに再起)
                                </div>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="364" y="535" fill="#000000" font-family="Helvetica" font-size="12px">
                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。...
                </text>
            </switch>
        </g>
        <path d="M 614 117 L 614 205.76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 607.5 193.88 L 614 206.88 L 620.5 193.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 160px; margin-left: 616px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;">
                                node.children
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="616" y="160" fill="#000000" font-family="Helvetica" font-size="11px">
                    node.children
                </text>
            </switch>
        </g>
        <path d="M 539 87 L 539 65 L 689 65 L 689 87" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 87 L 539 117 L 689 117 L 689 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 87 L 689 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="613.5" y="82.5">
                Stack
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 94px; margin-left: 545px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="545" y="106" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 539 110 L 689 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 246 80 L 246 60 L 443 60 L 443 80" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 246 80 L 246 122 L 443 122 L 443 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 246 80 L 443 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="344" y="77.5">
                VisitorStack
            </text>
        </g>
        <path d="M 246 84 L 443 84" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 95px; margin-left: 252px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="252" y="107" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 443 91 L 524.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 537.88 91 L 524.88 97.5 L 524.88 84.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 128.96 91 L 237.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 244.88 91 L 237.88 93.33 L 237.88 88.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 81.98 109.5 L 82 353 Q 82 363 84.44 363.05 L 86.88 363.11" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 93.88 363.27 L 86.83 365.44 L 86.94 360.78 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 35 92.5 L 35 72.5 L 128.96 72.5 L 128.96 92.5" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 35 92.5 L 35 109.5 L 128.96 109.5 L 128.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 35 92.5 L 128.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="81.48" y="90">
                Client(bin)
            </text>
        </g>
        <path d="M 35 96.5 L 128.96 96.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="501" y="0" width="226" height="45" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 224px; height: 1px; padding-top: 23px; margin-left: 502px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                構造を保持するObjectStructureとして
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="614" y="26" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    構造を保持するObjectStructureとして
                </text>
            </switch>
        </g>
        <path d="M 614 45 L 614 65" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 124.58 109.5 L 329.16 198.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 333.97 200.42 L 326.16 200.84 L 329.16 198.33 L 328.95 194.42 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 483 233 L 530.88 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 537.88 233 L 530.88 235.33 L 530.88 230.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 233 L 276.62 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 269.62 233 L 276.62 230.67 L 276.62 235.33 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 213.5 L 335 190.5 L 483 190.5 L 483 213.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 213.5 L 335 275.5 L 483 275.5 L 483 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 213.5 L 483 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="408.5" y="208">
                Aspects
            </text>
        </g>
        <path d="M 335 217.5 L 483 217.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 229px; margin-left: 341px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <u>
                                    + of(scope: IConstruct)
                                </u>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="341" y="241" fill="#000000" font-family="Helvetica" font-size="12px">
                    + of(scope: IConstruct)
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 256px; margin-left: 341px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + add(aspect: IAspect)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="341" y="268" fill="#000000" font-family="Helvetica" font-size="12px">
                    + add(aspect: IAspect)
                </text>
            </switch>
        </g>
        <path d="M 689 91 L 743 91 L 743 233 L 703.12 233" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 690.12 233 L 703.12 226.5 L 703.12 239.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="284" y="293" width="246" height="34" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 244px; height: 1px; padding-top: 310px; margin-left: 285px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspectsが媒介として存在。
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="407" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspect...
                </text>
            </switch>
        </g>
        <path d="M 407.9 275.5 L 407.44 293" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Text is not SVG - cannot display
            </text>
        </a>
    </switch>
</svg>