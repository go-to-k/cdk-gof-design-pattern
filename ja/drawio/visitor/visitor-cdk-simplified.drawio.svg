<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="825px" height="620px" viewBox="-0.5 -0.5 825 620" content="&lt;mxfile&gt;&lt;diagram id=&quot;9KW1ADvCEIuN-hiICIac&quot; name=&quot;cdk&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);">
    <defs/>
    <g>
        <rect x="125" y="2" width="70" height="30" fill="#ffff88" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 126px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                独自
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="160" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    独自
                </text>
            </switch>
        </g>
        <rect x="35" y="2" width="70" height="30" fill="#cce5ff" stroke="#000000" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 17px; margin-left: 36px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                CDK提供
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="70" y="21" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    CDK提供
                </text>
            </switch>
        </g>
        <path d="M 292 365.5 L 532.63 365.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 537.88 365.5 L 530.88 369 L 532.63 365.5 L 530.88 362 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 95 357 L 95 337 L 292 337 L 292 357" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 95 357 L 95 394 L 292 394 L 292 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 95 357 L 292 357" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="193" y="354.5">
                BucketVersioningChecker
            </text>
        </g>
        <path d="M 95 361 L 292 361" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 372px; margin-left: 101px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="101" y="384" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 193.5 337 L 193.5 275.62" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 193.5 262.62 L 200 275.62 L 187 275.62 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 118.5 227.5 L 118.5 204.5 L 268.5 204.5 L 268.5 227.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 118.5 227.5 L 118.5 261.5 L 268.5 261.5 L 268.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 118.5 227.5 L 268.5 227.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="193" y="222">
                IAspect
            </text>
        </g>
        <path d="M 118.5 231.5 L 268.5 231.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 243px; margin-left: 125px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <i>
                                    + visit(node: IConstruct)
                                </i>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="125" y="255" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruc...
                </text>
            </switch>
        </g>
        <path d="M 539 368.5 L 539 345.5 L 689 345.5 L 689 368.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 368.5 L 539 385.5 L 689 385.5 L 689 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 368.5 L 689 368.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="613.5" y="363">
                Bucket
            </text>
        </g>
        <path d="M 539 372.5 L 689 372.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 231 L 539 208 L 689 208 L 689 231" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 231 L 539 258 L 689 258 L 689 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 231 L 689 231" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" font-style="italic" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="613.5" y="225.5">
                IConstruct
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 238px; margin-left: 545px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="545" y="250" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 539 254 L 689 254" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 614 345.5 L 614 272.12" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 614 259.12 L 620.5 272.12 L 607.5 272.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 185.64 452 L 190.91 394" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="0" y="452" width="360" height="124" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 358px; height: 1px; padding-top: 514px; margin-left: 2px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                ダブルディスパッチによる具象な操作対象の型ごとの引数の
                                <br/>
                                メソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしている。
                                <br/>
                                (全IConstructに対応するダブルディスパッチは量の問題で現実的に不可能でもある)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="2" y="518" fill="#000000" font-family="Helvetica" font-size="12px">
                    ダブルディスパッチによる具象な操作対象の型ごとの引数のメソッドはなく、visitメソッドの最初で`if (node instanceof CfnBucket)`による分岐で操作対象のオブジェクトに絞っていて、それをCDK内部としては本質的にVisitorパターンと見なしている。...
                </text>
            </switch>
        </g>
        <path d="M 609.36 397 L 611.05 385.5" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <rect x="362" y="397" width="462" height="222" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 460px; height: 1px; padding-top: 508px; margin-left: 364px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <div>
                                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。
                                </div>
                                <div></div>
                                <span style="text-align: center;">
                                    <br/>
                                    synthesize時、synthesize関数(aws-cdk-lib/core/lib/private/synthesis.ts)内のrecurse
                                    <br/>
                                    関数で、ObjectStructureとしてのStack(ツリーのルート)から順に再起的に辿り、
                                    <br/>
                                    自身のIConstructからAspects経由でIAspect(Visitor)の一覧を取得してVisitorがIConstructにアクセスできるようにしている。
                                    <br/>
                                    <br/>
                                </span>
                                <div>
                                    synthesize
                                </div>
                                <div>
                                    -&gt;invokeAspects
                                </div>
                                <div>
                                    -&gt;recurse
                                </div>
                                <div>
                                    -&gt;Aspects.ofで取った自Constructに対応するaspectsでループ
                                </div>
                                <div>
                                    -&gt;aspect.visit
                                </div>
                                <div>
                                    -&gt;自Constructのnode.childrenでループ
                                </div>
                                <div>
                                    -&gt;recurse(子Constructごとに再起)
                                </div>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="364" y="512" fill="#000000" font-family="Helvetica" font-size="12px">
                    ダブルディスパッチでなく、IConstruct, Bucket側には自分自身(this)をVisitorに渡すacceptメソッドはない。...
                </text>
            </switch>
        </g>
        <path d="M 614 117 L 614 205.76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 607.5 193.88 L 614 206.88 L 620.5 193.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 160px; margin-left: 616px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;">
                                node.children
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="616" y="160" fill="#000000" font-family="Helvetica" font-size="11px">
                    node.children
                </text>
            </switch>
        </g>
        <path d="M 539 87 L 539 65 L 689 65 L 689 87" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 87 L 539 117 L 689 117 L 689 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 539 87 L 689 87" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="613.5" y="82.5">
                Stack
            </text>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 140px; height: 1px; padding-top: 94px; margin-left: 545px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + node: Node
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="545" y="106" fill="#000000" font-family="Helvetica" font-size="12px">
                    + node: Node
                </text>
            </switch>
        </g>
        <path d="M 539 110 L 689 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 246 80 L 246 60 L 443 60 L 443 80" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 246 80 L 246 122 L 443 122 L 443 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 246 80 L 443 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="344" y="77.5">
                VisitorStack
            </text>
        </g>
        <path d="M 246 84 L 443 84" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 187px; height: 1px; padding-top: 95px; margin-left: 252px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 15px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + visit(node: IConstruct)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="252" y="107" fill="#000000" font-family="Helvetica" font-size="12px">
                    + visit(node: IConstruct)
                </text>
            </switch>
        </g>
        <path d="M 443 91 L 524.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 537.88 91 L 524.88 97.5 L 524.88 84.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 128.96 91 L 237.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 244.88 91 L 237.88 93.33 L 237.88 88.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 81.98 109.5 L 82 353 Q 82 363 84.44 363.05 L 86.88 363.11" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 93.88 363.27 L 86.83 365.44 L 86.94 360.78 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 35 92.5 L 35 72.5 L 128.96 72.5 L 128.96 92.5" fill="#ffff88" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 35 92.5 L 35 109.5 L 128.96 109.5 L 128.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 35 92.5 L 128.96 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="81.48" y="90">
                Client(bin)
            </text>
        </g>
        <path d="M 35 96.5 L 128.96 96.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="501" y="0" width="226" height="45" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 224px; height: 1px; padding-top: 23px; margin-left: 502px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                構造を保持するObjectStructureとして
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="614" y="26" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    構造を保持するObjectStructureとして
                </text>
            </switch>
        </g>
        <path d="M 614 45 L 614 65" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 124.58 109.5 L 329.16 198.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 333.97 200.42 L 326.16 200.84 L 329.16 198.33 L 328.95 194.42 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 483 233 L 530.88 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 537.88 233 L 530.88 235.33 L 530.88 230.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 233 L 276.62 233" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 269.62 233 L 276.62 230.67 L 276.62 235.33 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 213.5 L 335 190.5 L 483 190.5 L 483 213.5" fill="#cce5ff" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 213.5 L 335 275.5 L 483 275.5 L 483 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 335 213.5 L 483 213.5" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="408.5" y="208">
                Aspects
            </text>
        </g>
        <path d="M 335 217.5 L 483 217.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 229px; margin-left: 341px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <u>
                                    + of(scope: IConstruct)
                                </u>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="341" y="241" fill="#000000" font-family="Helvetica" font-size="12px">
                    + of(scope: IConstruct)
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 256px; margin-left: 341px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 23px; overflow: hidden;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                + add(aspect: IAspect)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="341" y="268" fill="#000000" font-family="Helvetica" font-size="12px">
                    + add(aspect: IAspect)
                </text>
            </switch>
        </g>
        <path d="M 689 91 L 743 91 L 743 233 L 703.12 233" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
        <path d="M 690.12 233 L 703.12 226.5 L 703.12 239.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/>
        <rect x="284" y="293" width="246" height="34" fill="#fff2cc" stroke="#000000" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 244px; height: 1px; padding-top: 310px; margin-left: 285px;">
                        <div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspectsが媒介として存在。
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="407" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Element(IConstruct)がVisitor(IAspect)を直接呼ばず、Aspect...
                </text>
            </switch>
        </g>
        <path d="M 407.9 275.5 L 407.44 293" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Text is not SVG - cannot display
            </text>
        </a>
    </switch>
</svg>